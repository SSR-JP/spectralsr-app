(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7170],{4437:function(e,t,r){Promise.resolve().then(r.bind(r,1526))},1526:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return G}});var a=r(9241),n=r(2960),o=r(1326),s=r(4990),i=r(4161),c=r(7183),l=r(8409),d=r(49),u=r(7205),h=r(7318),p=r(7818),v=r(3098),m=r(2265),y=r(7575),g=r(5041),f=r(6463),Z=r(4326),x=r(3457),b=r(2331),C=r(4671),S=r(6548),w=r(9128);function B(e){let{loading:t,progressValue:r,progressVariant:n,children:o,sx:s,onClick:i,fullWidth:c,disabled:l}=e;return(0,a.BX)(S.Z,{variant:"contained",sx:{...s},onClick:i,disabled:t||l,fullWidth:c,children:[o,t?(0,a.tZ)(w.Z,{sx:{position:"absolute",bottom:0,left:0,right:0},variant:n,value:r}):null]})}B.defaultProps={progressVariant:"indeterminate",sx:{},fullWidth:void 0,loading:!1,progressValue:0};var I=r(149),k=r(4299),P=r(3796),_=r(4980),R=r(3460),E=r(8153),T=r(1638),D=r(3608),X=r(2420),A=r(1096),F=r(824),M=r(511),N=r(385),j=r(8784),z=r(468);function O(e){let{open:t,ticketBalance:r,requiredTickets:n=1,onConfirm:s,onCancel:i,onPurchase:c,purchaseLoading:l=!1}=e,[d]=(0,R.fl)(),u=(0,E.PQ)(E.YI.primary.getArgb(d.scheme)),p=(0,E.PQ)(E.YI.error.getArgb(d.scheme)),m=(0,E.PQ)(E.YI.surfaceVariant.getArgb(d.scheme)),y=r>=n,g=r-n;return(0,a.BX)(A.Z,{open:t,onClose:i,maxWidth:"sm",fullWidth:!0,sx:{"& .MuiDialog-paper":{borderRadius:3}},children:[(0,a.BX)(F.Z,{css:(0,v.iv)({display:"flex",alignItems:"center",gap:"8px",paddingBottom:"8px"}),children:[y?(0,a.tZ)(T.Z,{css:(0,v.iv)({color:u})}):(0,a.tZ)(D.Z,{css:(0,v.iv)({color:p})}),(0,a.tZ)(M.Z,{variant:"h6",component:"span",children:y?"チケット消費の確認":"チケットが不足しています"})]}),(0,a.tZ)(N.Z,{css:(0,v.iv)({paddingTop:"8px"}),children:y?(0,a.BX)(a.HY,{children:[(0,a.tZ)(M.Z,{variant:"body1",css:(0,v.iv)({marginBottom:"16px"}),children:"SSR計算を開始します。以下のチケットが消費されます。"}),(0,a.BX)(o.Z,{css:(0,v.iv)({backgroundColor:m,borderRadius:"8px",padding:"16px",marginBottom:"16px"}),children:[(0,a.BX)(o.Z,{css:(0,v.iv)({display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"}),children:[(0,a.tZ)(M.Z,{variant:"body2",color:"textSecondary",children:"現在のチケット残高"}),(0,a.BX)(M.Z,{variant:"body1",css:(0,v.iv)({fontWeight:"bold"}),children:[r,"枚"]})]}),(0,a.BX)(o.Z,{css:(0,v.iv)({display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"}),children:[(0,a.tZ)(M.Z,{variant:"body2",color:"textSecondary",children:"消費チケット"}),(0,a.BX)(M.Z,{variant:"body1",css:(0,v.iv)({color:p}),children:["-",n,"枚"]})]}),(0,a.tZ)(h.Z,{css:(0,v.iv)({margin:"8px 0"})}),(0,a.BX)(o.Z,{css:(0,v.iv)({display:"flex",justifyContent:"space-between",alignItems:"center"}),children:[(0,a.tZ)(M.Z,{variant:"body2",color:"textSecondary",children:"計算後の残高"}),(0,a.BX)(M.Z,{variant:"body1",css:(0,v.iv)({fontWeight:"bold"}),children:[g,"枚"]})]})]})]}):(0,a.BX)(a.HY,{children:[(0,a.tZ)(M.Z,{variant:"body1",css:(0,v.iv)({marginBottom:"16px"}),children:"SSR計算を実行するにはチケットが必要です。"}),(0,a.BX)(o.Z,{css:(0,v.iv)({backgroundColor:m,borderRadius:"8px",padding:"16px",marginBottom:"16px"}),children:[(0,a.BX)(o.Z,{css:(0,v.iv)({display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"}),children:[(0,a.tZ)(M.Z,{variant:"body2",color:"textSecondary",children:"現在のチケット残高"}),(0,a.BX)(M.Z,{variant:"body1",css:(0,v.iv)({color:p}),children:[r,"枚"]})]}),(0,a.BX)(o.Z,{css:(0,v.iv)({display:"flex",justifyContent:"space-between",alignItems:"center"}),children:[(0,a.tZ)(M.Z,{variant:"body2",color:"textSecondary",children:"必要なチケット"}),(0,a.BX)(M.Z,{variant:"body1",css:(0,v.iv)({fontWeight:"bold"}),children:[n,"枚"]})]})]}),(0,a.tZ)(M.Z,{variant:"body2",color:"textSecondary",children:"チケットを購入してからSSR計算を開始してください。"})]})}),(0,a.BX)(j.Z,{css:(0,v.iv)({padding:"16px 24px"}),children:[(0,a.tZ)(S.Z,{onClick:i,color:"inherit",children:"キャンセル"}),y?(0,a.tZ)(S.Z,{onClick:s,variant:"contained",css:(0,v.iv)({backgroundColor:u}),children:"計算を開始"}):(0,a.tZ)(S.Z,{onClick:c,variant:"contained",startIcon:l?(0,a.tZ)(z.Z,{size:20,color:"inherit"}):(0,a.tZ)(X.Z,{}),disabled:l,css:(0,v.iv)({backgroundColor:u}),children:l?"準備中...":"チケットを購入"})]})]})}var Y=r(9998);let L=()=>{let[e,t]=(0,m.useState)(0),[r,a]=(0,m.useState)(!1),[n]=(0,k.mN)();return{ticketBalance:e,isLoading:r,fetchTicketBalance:(0,m.useCallback)(async()=>{if("connected"!==n.serviceStatus)return;a(!0);let e=n.apiGatewayUrl,r=n.apiClient.getAccessToken();try{let a=await fetch("".concat(e,"/tickets/balance"),{headers:{Authorization:"Bearer ".concat(r)}});if(!a.ok)throw Error("HTTP error! status: ".concat(a.status));let n=await a.json();t(Math.floor(n.ticket_balance))}catch(e){console.error("Failed to fetch ticket count:",e),(0,g.yv)("チケットの取得に失敗しました。",{variant:"error"})}finally{a(!1)}},[n.serviceStatus,n.apiGatewayUrl,n.apiClient]),updateTicketBalance:(0,m.useCallback)(e=>{t(Math.floor(e))},[])}};var H=r(6091);let W=(0,p.default)(()=>Promise.all([r.e(5934),r.e(9109),r.e(2008)]).then(r.bind(r,2008)),{loadableGenerated:{webpack:()=>[2008]},ssr:!1});function G(){let e=(0,f.useRouter)(),[t]=(0,_.Ay)(),[r]=(0,k.mN)(),p=r.apiClient,[S,w]=(0,m.useState)(""),[R,E]=(0,m.useState)(""),[T,D]=(0,m.useState)(""),[X,A]=(0,m.useState)(0),[F,M]=(0,C.P2)(),{setActiveStep:N}=(0,b.b)(),[j,z]=(0,m.useState)(!1),[G,K]=(0,m.useState)(0),[Q,U]=(0,m.useState)([]),[V,J]=(0,m.useState)(!1),[q,$]=(0,m.useState)("zoom"),{ticketBalance:ee,fetchTicketBalance:et,updateTicketBalance:er}=L(),[ea,en]=(0,m.useState)(!1),[eo,es]=(0,m.useState)(()=>()=>{}),{waitingForPayment:ei,purchaseRunning:ec,handlePurchase:el,handleCancelPayment:ed}=(0,H.s)({onPaymentSuccess:()=>{et(),eo&&(eo(),es(()=>()=>{}))},onPaymentCancel:()=>{console.log("Payment cancelled")},onPaymentError:e=>{console.error("Payment error:",e)}}),[eu,eh]=(0,m.useState)([-6,4]),[ep,ev]=(0,m.useState)([0,4]),em=(0,n.Z)(),ey=()=>{$("select")},eg=()=>{$("zoom")};(0,m.useEffect)(()=>{if(N(3),"loaded"!==t.status){e.push("/");return}et()},[t.status,et]),(0,m.useEffect)(()=>{(async()=>{try{let e=await p.serviceFetch("dataset/ssr/settings/preferred",[]);if(!e.ok){let t=await e.text();throw Error("HTTP error! status: ".concat(e.status,", ").concat(t))}let{rho_range:t}=await e.json();w(t[1]),E(t[0])}catch(e){console.error(e)}try{let e=await p.serviceFetch("dataset/rho/optimization/status",[]);if(!e.ok){let t=await e.text();throw Error("HTTP error! status: ".concat(e.status,", ").concat(t))}let{steps:t,is_done:r}=await e.json();U(t.map(e=>({iterationNumber:e.iteration_number,rho:e.rho,score:e.score})))}catch(e){console.error(e)}try{let e=await p.serviceFetch("dataset/ssr/settings/latest",[]);if(!e.ok){let t=await e.text();throw Error("HTTP error! status: ".concat(e.status,", ").concat(t))}let t=await e.json();if(!t)throw Error("No data");let{rho:r}=t;D(r)}catch(e){console.error(e)}})()},[]),(0,m.useEffect)(()=>{if(!j)return;let e=setInterval(()=>{p.serviceFetch("dataset/rho/optimization/status",[]).then(e=>e.json()).then(t=>{let{steps:r,is_done:a}=t;return U(r.map(e=>({iterationNumber:e.iteration_number,rho:e.rho,score:e.score}))),a&&(clearInterval(e),p.serviceFetch("dataset/rho/best",["range_min=".concat(R),"range_max=".concat(S)]).then(e=>e.json()).then(e=>{let{rho:t}=e;return D(t),z(!1),null}).catch(e=>{console.error(e),(0,g.yv)("".concat(e),{variant:"error"})})),null}).catch(e=>{console.error(e),(0,g.yv)("".concat(e),{variant:"error"})})},1e3);return()=>{clearInterval(e)}},[j,G]);let ef=(0,m.useMemo)(()=>[{x:Q.map(e=>e.rho),y:Q.map(e=>e.score),type:"scatter",mode:"markers"}],[Q]),eZ=async()=>{if(t.isLocked){e.push("/calc/ssr-results");return}if("number"!=typeof T){(0,g.yv)("ρの値を入力してください。",{variant:"error",persist:!0,action:P.D});return}let r=()=>ex(T);es(()=>r),await et(),en(!0)},ex=async t=>{J(!0),M.setRho(t);let{optimizeIterations:r,srRange:a,srIntervalDistance:n,searchIntervalDistance:o,searchIterations:s}=F;console.log("!!!",F);try{let i=await p.serviceFetch("dataset/ssr/start",[],{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({optimize_iterations:r,sr_range:a,sr_interval_distance:n,search_interval_distance:o,search_iterations:s,rho:t})});if(!i.ok){let e=await (0,k.NZ)(i);(0,g.yv)(e,{variant:"error",action:P.D,persist:!0}),J(!1);return}e.push("/calc/ssr-results")}catch(e){console.error(e),(0,g.yv)("".concat(e),{variant:"error",action:P.D,persist:!0}),J(!1)}},eb=j||t.isLocked;return(0,a.BX)(x.T,{onNext:eZ,onBack:()=>{e.push("/calc/ssr-parameter-settings")},children:[(0,a.BX)(o.Z,{sx:{display:"grid",height:{sm:"auto",md:"100%"},gridTemplateColumns:{sm:"1fr",md:"2fr 1fr"},gridTemplateRows:{sm:"1fr 1fr",md:"1fr"},gap:1},children:[(0,a.tZ)("div",{css:(0,v.iv)({display:"flex",justifyContent:"center"}),children:(0,a.tZ)(W,{onUpdate:e=>{eh(e.layout.xaxis.range),ev(e.layout.yaxis.range)},data:ef,layout:{width:640,height:400,dragmode:q,xaxis:{type:"log",exponentformat:"power",autorange:!1,range:eu},yaxis:{type:"log",exponentformat:"power",autorange:!1,range:ep},shapes:[{type:"rect",xref:"x",yref:"paper",x0:R,y0:0,x1:S,y1:1,line:{color:em.palette.primary.main,width:2,dash:"dash"}}]},onSelected:e=>{E(e.range.x[0]),w(e.range.x[1])}})}),(0,a.BX)(s.Z,{sx:{p:2,overflowY:"scroll",display:"flex",flexDirection:"column"},children:[(0,a.tZ)(o.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,a.BX)(i.Z,{value:X,onChange:(e,t)=>{A(t)},children:[(0,a.tZ)(c.Z,{label:"ρ最適化",sx:{textTransform:"none"},disabled:eb}),(0,a.tZ)(c.Z,{label:"ρ選択",sx:{textTransform:"none"},disabled:eb})]})}),(0,a.BX)(o.Z,{sx:{display:0===X?"block":"none",flexGrow:1,py:3},children:[(0,a.tZ)(l.Z,{component:"legend",sx:{display:"flex",alignItems:"center"},children:(0,a.tZ)("span",{style:{flexGrow:1},children:"最適化範囲"})}),(0,a.BX)(d.Z,{children:[(0,a.tZ)(u.Z,{disableHoverListener:!0,title:"グラフ上で範囲選択できます。",children:(0,a.tZ)(Z.Ki,{disabled:eb,label:"最小値",sx:{mt:1},value:R,onChange:e=>{E(e)},validator:(0,Z.rB)(3),onFocus:()=>ey(),onBlur:()=>eg()})}),(0,a.tZ)(u.Z,{disableHoverListener:!0,title:"グラフ上で範囲選択できます。",children:(0,a.tZ)(Z.Ki,{disabled:eb,label:"最大値",sx:{mt:1},value:S,onChange:e=>{w(e)},validator:(0,Z.rB)(3),onFocus:()=>ey(),onBlur:()=>eg()})})]}),(0,a.tZ)(B,{sx:{mt:3,overflow:"hidden"},fullWidth:!0,disabled:eb,loading:j,progressVariant:"determinate",progressValue:Q.length/G*100,onClick:()=>{z(!0),U([]),p.serviceFetch("dataset/rho/optimization/start",[],{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({optimize_iterations:F.optimizeIterations,sr_range:F.srRange,sr_interval_distance:F.srIntervalDistance,search_interval_distance:F.searchIntervalDistance,search_iterations:F.searchIterations,rho_range:[R,S]})}).then(e=>e.json()).then(e=>(K(e.max_iterations),null)).catch(e=>{console.error(e)}).then(()=>null).catch(e=>{console.error(e)})},children:"最適化を開始"})]}),(0,a.BX)(o.Z,{sx:{display:1===X?"block":"none",flexGrow:1,py:3},children:[(0,a.tZ)(l.Z,{component:"legend",sx:{display:"flex",alignItems:"center"},children:(0,a.tZ)("span",{style:{flexGrow:1},children:"選択範囲"})}),(0,a.BX)(d.Z,{children:[(0,a.tZ)(u.Z,{disableHoverListener:!0,title:"グラフ上で範囲選択できます。",children:(0,a.tZ)(Z.Ki,{disabled:eb,label:"最小値",sx:{mt:1},value:R,onChange:e=>{E(e)},validator:(0,Z.rB)(3),onFocus:()=>ey(),onBlur:()=>eg()})}),(0,a.tZ)(u.Z,{disableHoverListener:!0,title:"グラフ上で範囲選択できます。",children:(0,a.tZ)(Z.Ki,{disabled:eb,label:"最大値",sx:{mt:1},value:S,onChange:e=>{w(e)},validator:(0,Z.rB)(3),onFocus:()=>ey(),onBlur:()=>eg()})})]}),(0,a.tZ)(B,{disabled:eb,sx:{mt:3},fullWidth:!0,onClick:()=>{p.serviceFetch("dataset/rho/best",["range_min=".concat(R),"range_max=".concat(S)]).then(e=>e.json()).then(e=>{let{rho:t}=e;return D(t),null}).catch(e=>{console.error(e)})},children:"最小値を取得"})]}),(0,a.tZ)(h.Z,{sx:{mt:2}}),(0,a.tZ)(o.Z,{display:"flex",justifyContent:"center",alignItems:"center",children:(0,a.tZ)(y.Z,{color:"action",sx:{transform:"rotate(90deg)",my:2}})}),(0,a.tZ)(Z.Ki,{disabled:eb,label:"使用するρ",fullWidth:!0,value:T,onChange:e=>D(e),validator:(0,Z.rB)(3)})]})]}),(0,a.tZ)(I.f,{primaryText:"SSR実行中",open:V}),(0,a.tZ)(O,{open:ea,ticketBalance:ee,requiredTickets:1,onConfirm:()=>{en(!1),eo&&(eo(),es(()=>()=>{}))},onCancel:()=>{en(!1),es(()=>()=>{})},onPurchase:()=>{en(!1),el()},purchaseLoading:ec}),ei&&(0,a.tZ)(Y.Z,{onCancel:ed})]})}},4326:function(e,t,r){"use strict";r.d(t,{Ki:function(){return s},rB:function(){return o}});var a=r(9241),n=r(6858);function o(e){return t=>parseFloat(Number(t).toPrecision(e))}let s=(0,r(2265).forwardRef)(function(e,t){let{label:r,value:o,onChange:s,onBlur:i=()=>{},validator:c,disabled:l,...d}=e,u=null!=c?c:e=>parseFloat(Number(e).toFixed(3));return(0,a.tZ)(n.Z,{disabled:l,ref:t,label:r,value:"number"==typeof o?u(o):o,onChange:e=>{s(e.target.value)},onBlur:e=>{s(u(e.target.value)),null==i||i()},onKeyDown:e=>{let t=e.target;"Enter"===e.key&&s(u(t.value))},...d})})},9998:function(e,t,r){"use strict";r.d(t,{Z:function(){return g}});var a=r(9241),n=r(3460),o=r(3098),s=r(8153),i=r(9337),c=r(137),l=r(4593),d=r(2305),u=r(270),h=r(4696),p=r(335),v=r(468),m=r(511),y=r(6548);function g(e){let{onCancel:t}=e,[r]=(0,n.fl)(),g=(0,s.PQ)(s.YI.primary.getArgb(r.scheme));(0,s.PQ)(s.YI.surface.getArgb(r.scheme));let f=(0,s.PQ)(s.YI.surfaceContainer.getArgb(r.scheme));return(0,a.tZ)(l.Z,{open:!0,css:(0,o.iv)({zIndex:9999,backgroundColor:(0,d.Fq)("#000",.7),backdropFilter:"blur(4px)"}),children:(0,a.tZ)(u.Z,{css:(0,o.iv)({backgroundColor:f,maxWidth:"400px",width:"90%",margin:"0 16px"}),children:(0,a.BX)(h.Z,{css:(0,o.iv)({display:"flex",flexDirection:"column",alignItems:"center",padding:"32px",textAlign:"center",position:"relative"}),children:[(0,a.tZ)(p.Z,{onClick:t,css:(0,o.iv)({position:"absolute",top:"8px",right:"8px"}),children:(0,a.tZ)(i.Z,{})}),(0,a.tZ)(c.Z,{css:(0,o.iv)({fontSize:"48px",color:g,marginBottom:"16px"})}),(0,a.tZ)(v.Z,{css:(0,o.iv)({color:g,marginBottom:"16px"})}),(0,a.tZ)(m.Z,{variant:"h6",css:(0,o.iv)({marginBottom:"8px"}),children:"決済処理中..."}),(0,a.tZ)(m.Z,{variant:"body1",css:(0,o.iv)({marginBottom:"16px"}),children:"新しいタブで決済を続行してください"}),(0,a.tZ)(m.Z,{variant:"body2",color:"textSecondary",css:(0,o.iv)({marginBottom:"24px"}),children:"決済が完了すると自動的にこの画面は閉じられます"}),(0,a.tZ)(y.Z,{variant:"outlined",onClick:t,css:(0,o.iv)({borderColor:g,color:g}),children:"キャンセル"})]})})})}},6091:function(e,t,r){"use strict";r.d(t,{s:function(){return s}});var a=r(4299),n=r(5041),o=r(2265);let s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,r]=(0,o.useState)(!1),[s,i]=(0,o.useState)(!1),c=(0,o.useRef)(null),l=(0,o.useRef)(null),[d]=(0,a.mN)();return(0,o.useEffect)(()=>("BroadcastChannel"in window&&(l.current=new BroadcastChannel("payment-status"),l.current.onmessage=t=>{if(console.log("Payment message received:",t.data),"PAYMENT_COMPLETE"===t.data.type){var a,o,s;if(r(!1),i(!1),"success"===t.data.status)(0,n.yv)("チケットの購入が完了しました！",{variant:"success"}),null===(a=e.onPaymentSuccess)||void 0===a||a.call(e);else if("cancel"===t.data.status)(0,n.yv)("支払いがキャンセルされました。",{variant:"info"}),null===(o=e.onPaymentCancel)||void 0===o||o.call(e);else if("error"===t.data.status){let t="支払いの処理中にエラーが発生しました。";(0,n.yv)(t,{variant:"error"}),null===(s=e.onPaymentError)||void 0===s||s.call(e,t)}}}),()=>{l.current&&l.current.close()}),[e]),(0,o.useEffect)(()=>{if(!t||!c.current)return;let e=setInterval(()=>{var t;(null===(t=c.current)||void 0===t?void 0:t.closed)&&(clearInterval(e),r(!1),i(!1),console.log("Payment tab was closed by user"))},1e3);return()=>clearInterval(e)},[t]),{waitingForPayment:t,purchaseRunning:s,handlePurchase:(0,o.useCallback)(async()=>{i(!0);let t=d.apiGatewayUrl,a=d.apiClient.getAccessToken(),o=window.location.origin;try{if(c.current=window.open("".concat(o,"/payment-prepare"),"_blank"),!c.current)throw Error("新しいタブを開けませんでした。ポップアップブロックを無効にしてください。");r(!0);let s=t=>{if("PAYMENT_PREPARE_READY"===t.data.type)console.log("Payment prepare page is ready"),l();else if("PAYMENT_CANCELED"===t.data.type){var a;console.log("Payment was canceled from prepare page"),r(!1),i(!1),null===(a=e.onPaymentCancel)||void 0===a||a.call(e)}},l=async()=>{try{let e=await fetch("".concat(t,"/payments/checkout-session"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({success_url:"".concat(o,"/payment-success?session_id={CHECKOUT_SESSION_ID}"),cancel_url:"".concat(o,"/payment-cancel"),ticketQuantity:1})});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let r=await e.json();console.log("Checkout Session created:",r);let{checkout_url:n}=r;c.current&&!c.current.closed&&c.current.postMessage({type:"STRIPE_URL",url:n},"*")}catch(a){var s;console.error("Checkout session creation failed:",a),c.current&&!c.current.closed&&c.current.postMessage({type:"PAYMENT_ERROR",message:"決済ページの準備に失敗しました。"},"*");let t="購入に失敗しました。もう一度お試しください。";(0,n.yv)(t,{variant:"error"}),i(!1),r(!1),null===(s=e.onPaymentError)||void 0===s||s.call(e,t)}};window.addEventListener("message",s),setTimeout(()=>{window.removeEventListener("message",s)},6e4)}catch(r){var s;console.error("Purchase failed:",r);let t=r instanceof Error&&r.message.includes("タブ")?r.message:"購入に失敗しました。もう一度お試しください。";(0,n.yv)(t,{variant:"error"}),i(!1),null===(s=e.onPaymentError)||void 0===s||s.call(e,t)}},[d,e]),handleCancelPayment:(0,o.useCallback)(()=>{c.current&&!c.current.closed&&c.current.close(),r(!1),i(!1)},[])}}},4671:function(e,t,r){"use strict";r.d(t,{L7:function(){return l},P2:function(){return i}});var a=r(9241),n=r(2265);let o=(0,n.createContext)({fittingFunction:"",peakRange:[],noiseRange:[],optimizeIterations:0,srIntervalDistance:0,searchIntervalDistance:0,searchIterations:0,rho:0,rhoMax:0,rhoMin:0,searchSettingsAuto:!0,rhoSettingsAuto:!0,srRange:[0,0],originalIntervalDistance:0,plotData:[],progressIndicatorActive:!1}),s=(0,n.createContext)(()=>{}),i=()=>{let e=(0,n.useContext)(o),t=(0,n.useContext)(s);return[e,{setOptimizeIterations:e=>t({type:"setOptimizeIterations",payload:e}),setSrRange:e=>t({type:"setSrRange",payload:e}),setSrIntervalDistance:e=>t({type:"setSrIntervalDistance",payload:e}),setSearchIntervalDistance:e=>t({type:"setSearchIntervalDistance",payload:e}),setSearchIterations:e=>t({type:"setSearchIterations",payload:e}),setRhoMax:e=>t({type:"setRhoMax",payload:e}),setRhoMin:e=>t({type:"setRhoMin",payload:e}),setRho:e=>t({type:"setRho",payload:e})}]},c=(e,t)=>{switch(t.type){case"setFittingFunction":return{...e,fittingFunction:t.payload};case"setOptimizeIterations":return{...e,optimizeIterations:t.payload};case"setSrRange":return{...e,srRange:t.payload};case"setSrIntervalDistance":return{...e,srIntervalDistance:t.payload};case"setSearchIntervalDistance":return{...e,searchIntervalDistance:t.payload};case"setSearchIterations":return{...e,searchIterations:t.payload};case"setRhoMax":return{...e,rhoMax:t.payload};case"setRhoMin":return{...e,rhoMin:t.payload};case"setRho":return{...e,rho:t.payload};default:throw Error("Invalid action type")}};function l(e){let{children:t}=e,[r,i]=(0,n.useReducer)(c,{fittingFunction:"",peakRange:[],noiseRange:[],optimizeIterations:0,srIntervalDistance:0,searchIntervalDistance:0,searchIterations:0,rho:0,rhoMax:0,rhoMin:0,searchSettingsAuto:!0,rhoSettingsAuto:!0,srRange:[0,0],originalIntervalDistance:0,plotData:[],progressIndicatorActive:!1});return(0,a.tZ)(o.Provider,{value:r,children:(0,a.tZ)(s.Provider,{value:i,children:t})})}}},function(e){e.O(0,[1665,9241,526,2036,1650,3676,5981,4692,5380,1892,8273,9294,659,5971,8015,6001,5144,8576,2971,7023,1744],function(){return e(e.s=4437)}),_N_E=e.O()}]);